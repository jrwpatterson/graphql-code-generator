(self.webpackChunk_graphql_codegen_website=self.webpackChunk_graphql_codegen_website||[]).push([[3714],{48860:function(){},23714:function(e,n,t){"use strict";t.r(n),t.d(n,{codegen:function(){return h},executePlugin:function(){return f}});var i=t(50408),r=t(43903),o=t(12640),s=t(57554),a=t(49159),l=t(33277),u=t(43165),c=t(37358),d=t(2061);async function f(e,n){if(!n||!n.plugin||"function"!=typeof n.plugin)throw new i.tF(`Invalid Custom Plugin "${e.name}"`,`\n        Plugin ${e.name} does not export a valid JS object with "plugin" function.\n\n        Make sure your custom plugin is written in the following form:\n\n        module.exports = {\n          plugin: (schema, documents, config) => {\n            return 'my-custom-plugin-content';\n          },\n        };\n        `);const t=e.schemaAst||(0,r.M)(e.schema,e.config),o=e.documents||[],s=e.pluginContext||{};if(n.validate&&"function"==typeof n.validate)try{await n.validate(t,o,e.config,e.outputFilename,e.allPlugins,s)}catch(a){throw new i.tF(`Plugin "${e.name}" validation failed:`,`\n            ${a.message}\n          `)}return Promise.resolve(n.plugin(t,o,"object"==typeof e.config?{...e.config}:e.config,{outputFile:e.outputFilename,allPlugins:e.allPlugins,pluginContext:s}))}function p(e,n){return(t=n)&&"object"==typeof t&&!Array.isArray(t)?n[e]:void 0;var t}const m=["key","requires","provides","external"];async function h(e){const n=e.documents||[],t=function(e){if(e.skipDocumentsValidation)return e.skipDocumentsValidation;return p("skipDocumentsValidation",e.config)||!1}(e);var r;n.length>0&&(!0!==(r=t)&&("object"!=typeof r||!r.skipDuplicateValidation))&&function(e){const n={};function t(e,t,i){if(void 0!==t.name){n[t.kind]||(n[t.kind]={}),n[t.kind][t.name.value]||(n[t.kind][t.name.value]={paths:new Set,contents:new Set});const i=n[t.kind],r=i[t.name.value].contents.size;if(i[t.name.value].paths.add(e.location),i[t.name.value].contents.add((0,l.S)(t)),r===i[t.name.value].contents.size)return null}return i.add(t)}e.forEach((e=>{const n=new Set;(0,u.Vn)(e.document,{OperationDefinition(i){t(e,i,n)},FragmentDefinition(i){t(e,i,n)}}),e.document.definitions=Array.from(n)}));Object.keys(n).forEach((e=>{const t=n[e],r=Object.keys(t);if(r.length){const n=r.filter((e=>t[e].contents.size>1));if(!n.length)return;const o=n.map((e=>`\n        * ${e} found in:\n          ${[...t[e].paths].map((e=>`\n              - ${e}\n            `.trimRight())).join("")}\n    `.trimRight())).join(""),s=e.replace("Definition","").toLowerCase();throw new i.tF(`Not all ${s}s have an unique name: ${n.join(", ")}`,`\n          Not all ${s}s have an unique name\n          ${o}\n        `)}}))}(n);const h=Object.keys(e.pluginMap).map((n=>e.pluginMap[n])),v=[];for(const i of h){const n="function"==typeof i.addToSchema?i.addToSchema(e.config):i.addToSchema;n&&v.push(n)}var y;(function(...e){const n=e.find((e=>"boolean"==typeof e));return"boolean"!=typeof n?e[e.length-1]:n})(p("federation",e.config),!1)&&(y=e.schemaAst||e.schema,!((0,o.nN)(y)?m.some((e=>y.getDirective(e))):(0,c.JW)(y)&&y.definitions.some((e=>e.kind===s.h.DIRECTIVE_DEFINITION&&m.includes(e.name.value)))))&&v.push(i.f4);const F=!e.schemaAst||v.length>0,k=F?(0,d.jf)({schemas:e.schemaAst?[e.schemaAst]:[],typeDefs:e.schemaAst?v:[e.schema,...v],convertExtensions:!0,assumeValid:!0,assumeValidSDL:!0,...e.config}):e.schemaAst,E=F||!e.schema?(0,i.LY)(k):e.schema;if(k&&n.length>0&&function(e){return!0!==e&&("object"!=typeof e||!e.skipValidationAgainstSchema)}(t)){const i=["NoUnusedFragments","NoUnusedVariables","KnownDirectives"];"object"==typeof t&&t.ignoreRules&&i.push(...(0,c._2)(t.ignoreRules));const r=p("externalFragments",e.config)||[],o=await(0,c.OV)(k,[...n,...r.map((e=>({location:e.importFrom,document:{kind:s.h.DOCUMENT,definitions:[e.node]}})))],a.i.filter((e=>!i.some((n=>e.name.startsWith(n))))));(0,c.sF)(o)}const S=new Set,b=new Set,N=await Promise.all(e.plugins.map((async n=>{const t=Object.keys(n)[0],r=e.pluginMap[t],o=n[t]||{},s="object"!=typeof o?o:{...e.config,...o},a=await f({name:t,config:s,parentConfig:e.config,schema:E,schemaAst:k,documents:e.documents,outputFilename:e.filename,allPlugins:e.plugins,skipDocumentsValidation:e.skipDocumentsValidation,pluginContext:e.pluginContext},r);if("string"==typeof a)return a||"";if((0,i.Ed)(a)){if(a.append&&a.append.length>0)for(const e of a.append)e&&b.add(e);if(a.prepend&&a.prepend.length>0)for(const e of a.prepend)e&&S.add(e);return a.content||""}return""})));return[...(w=Array.from(S.values()),w.sort(((e,n)=>{const t=g(e),i=g(n);return t<i?-1:t>i?1:0}))),...N,...Array.from(b.values())].filter(Boolean).join("\n");var w}function g(e){return e.startsWith("/*")||e.startsWith("//")||e.startsWith(" *")||e.startsWith(" */")||e.startsWith("*/")?0:e.startsWith("package")?1:e.startsWith("import")?2:3}},50408:function(e,n,t){"use strict";var i;t.d(n,{u3:function(){return b},tF:function(){return T},E1:function(){return k},f4:function(){return F},Wp:function(){return h},LY:function(){return _},Ed:function(){return m},L5:function(){return y},NT:function(){return E},o9:function(){return g},IF:function(){return p}});var r=t(48860),o=t(27061),s=t(44880),a=t(84553),l=t(43165),u=t(57554),c=t(65449),d=t(15409),f=t(37358);function p(e){if("function"==typeof e)return e;let n,[a,l]=e.split("#");if("change-case"===a&&(a="change-case-all"),"change-case-all"===a)n=i||(i=t.t(s,2));else{if(n=(0,r.createRequire)((0,o.cwd)()+"/index.js")(a),!(l in n)&&"function"!=typeof n)throw new Error(`${l} couldn't be found in module ${a}!`)}return n[l]||n}function m(e){return"object"==typeof e&&e.hasOwnProperty("content")}function h(e){return n=e,(0,a.HG)(n)||(0,a.zM)(n)?h(e.ofType):e;var n}function g(e){return(0,a.zM)(e)?e.ofType:e}function v(e){return!(0,a.zM)(e)||!(!(0,a.HG)(e)&&!(0,a.zM)(e))&&v(e.ofType)}function y(e,n,t){let i=0;const r=[];return(0,l.Vn)(e,{SelectionSet:{enter(e,i,o,s){if(s.find((e=>e.kind&&"FragmentDefinition"===e.kind&&n.includes(e.name.value))))return;const a=e.selections||[];if(t&&a.length>0){const e=(()=>{if(o.kind===u.h.FRAGMENT_DEFINITION)return o.typeCondition.name.value;if(o.kind===u.h.FIELD){const e=r[r.length-1];if(!e)throw new Error("Unable to find parent type! Please make sure you operation passes validation");const n=e.getFields()[o.name.value];if(!n)throw new Error(`Unable to find field "${o.name.value}" on type "${e}"!`);return h(n.type).name}if(o.kind===u.h.OPERATION_DEFINITION){if("query"===o.operation)return t.getQueryType().name;if("mutation"===o.operation)return t.getMutationType().name;if("subscription"===o.operation)return t.getSubscriptionType().name}else if(o.kind===u.h.INLINE_FRAGMENT)return o.typeCondition?o.typeCondition.name.value:r[r.length-1].name;return null})();r.push(t.getType(e))}},leave(e){const n=e.selections||[];t&&n.length>0&&r.pop()}},Field:{enter:(e,o,s,l,c)=>{if(e.name.value.startsWith("__"))return;if(c.find((e=>e.kind&&"FragmentDefinition"===e.kind&&n.includes(e.name.value))))return;const d=e.selectionSet&&e.selectionSet.selections||[],f=d.filter((e=>e.kind===u.h.FRAGMENT_SPREAD&&!n.includes(e.name.value)));if((0===d.length||f.length>0)&&i++,t){const n=r[r.length-1];if(n&&(0,a.lp)(n)){const t=n.getFields()[e.name.value];if(!t)throw new Error(`Unable to find field "${e.name.value}" on type "${n}"!`);v(t.type)&&i++}}}},enter:{VariableDefinition:(e,t,r,o,s)=>{s.find((e=>e.kind&&"FragmentDefinition"===e.kind&&n.includes(e.name.value)))||i++},InputValueDefinition:(e,t,r,o,s)=>{s.find((e=>e.kind&&"FragmentDefinition"===e.kind&&n.includes(e.name.value)))||i++}}}),i>0}const F=(0,c.Qc)("\n  scalar _FieldSet\n\n  directive @external on FIELD_DEFINITION\n  directive @requires(fields: _FieldSet!) on FIELD_DEFINITION\n  directive @provides(fields: _FieldSet!) on FIELD_DEFINITION\n  directive @key(fields: _FieldSet!) on OBJECT | INTERFACE\n");function k(e){return(0,f.gf)(e,{[f.h0.OBJECT_TYPE]:n=>{if(N(n,e)){const e=n.toConfig();return e.fields={[S]:{type:n},...e.fields},new a.h6(e)}return n}})}function E(e){return(0,f.gf)(e,{[f.h0.QUERY]:e=>{const n=e.toConfig();return delete n.fields._entities,delete n.fields._service,new a.h6(n)},[f.h0.UNION_TYPE]:e=>{const n=e.name;return"_Entity"===n||"_Any"===n?null:e},[f.h0.OBJECT_TYPE]:e=>"_Service"===e.name?null:e})}const S="__resolveReference";class b{constructor({enabled:e,schema:n}){this.enabled=!1,this.enabled=e,this.schema=n,this.providesMap=this.createMapOfProvides()}filterTypeNames(e){return this.enabled?e.filter((e=>"_FieldSet"!==e)):e}filterFieldNames(e){return this.enabled?e.filter((e=>e!==S)):e}skipDirective(e){return this.enabled&&["external","requires","provides","key"].includes(e)}skipScalar(e){return this.enabled&&"_FieldSet"===e}skipField({fieldNode:e,parentType:n}){return!!(this.enabled&&(0,a.lp)(n)&&N(n,this.schema))&&this.isExternalAndNotProvided(e,n)}isResolveReferenceField(e){const n="string"==typeof e.name?e.name:e.name.value;return this.enabled&&n===S}transformParentType({fieldNode:e,parentType:n,parentTypeSignature:t}){if(this.enabled&&(0,a.lp)(n)&&N(n,this.schema)&&(function(e,n){var t;const i=(0,a.lp)(e)?e.astNode||(0,f.IW)(e,n):e;return null===(t=i.fields)||void 0===t?void 0:t.some((e=>w("external",e).length))}(n,this.schema)||e.name.value===S)){const i=w("key",n);if(i.length){const r=[`{ __typename: '${n.name}' } &`],o=w("requires",e).map(this.extractKeyOrRequiresFieldSet),s=this.translateFieldSet(d({},...o),t),a=i.map((e=>{const n=this.extractKeyOrRequiresFieldSet(e);return this.translateFieldSet(n,t)})),[l,u]=a.length>1?["(",")"]:["",""];return r.push([l,a.join(" | "),u].join("")),o.length&&r.push(`& ${s}`),r.join(" ")}}return t}isExternalAndNotProvided(e,n){return this.isExternal(e)&&!this.hasProvides(n,e)}isExternal(e){return w("external",e).length>0}hasProvides(e,n){const t=this.providesMap[(0,a.lp)(e)?e.name:e.name.value];return!(!t||!t.length)&&t.includes(n.name.value)}translateFieldSet(e,n){return`GraphQLRecursivePick<${n}, ${JSON.stringify(e)}>`}extractKeyOrRequiresFieldSet(e){const n=e.arguments.find((e=>"fields"===e.name.value)).value.value;return(0,l.Vn)((0,c.Qc)(`{${n}}`),{leave:{SelectionSet:e=>e.selections.reduce(((e,n)=>(e[n.name]=n.selection,e)),{}),Field:e=>({name:e.name.value,selection:!e.selectionSet||e.selectionSet}),Document:e=>e.definitions.find((e=>"OperationDefinition"===e.kind&&"query"===e.operation)).selectionSet}})}extractProvidesFieldSet(e){const n=e.arguments.find((e=>"fields"===e.name.value)).value.value;if(/[{}]/gi.test(n))throw new Error("Nested fields in _FieldSet is not supported in the @provides directive");return n.split(/\s+/g)}createMapOfProvides(){const e={};return Object.keys(this.schema.getTypeMap()).forEach((n=>{const t=this.schema.getType(n);(0,a.lp)(t)&&Object.values(t.getFields()).forEach((n=>{const t=w("provides",n.astNode).map(this.extractProvidesFieldSet).reduce(((e,n)=>[...e,...n]),[]),i=h(n.type);e[i.name]||(e[i.name]=[]),e[i.name].push(...t)}))})),e}}function N(e,n){const{name:{value:t},directives:i}=(0,a.lp)(e)?(0,f.IW)(e,n):e,r=!(0,f.K)(n).has(t),o=!t.startsWith("__"),s=i.some((e=>"key"===e.name.value));return r&&o&&s}function w(e,n){var t;let i;return i=(0,a.lp)(n)?n.astNode:n,(null===(t=null==i?void 0:i.directives)||void 0===t?void 0:t.filter((n=>n.name.value===e)))||[]}class T extends Error{constructor(e,n,t){super(e),this.message=e,this.details=n,this.source=t,Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace(this,T)}}const _=(0,f.mQ)(f.HA)}}]);